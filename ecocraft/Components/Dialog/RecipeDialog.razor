@using ecocraft.Models
@using ecocraft.Services
@inject ContextService ContextService

<MudDialogContent>
    <MudContainer MaxWidth="MaxWidth.Medium" Style="min-width: 600px; min-height: 300px;">
        <MudGrid>
            <MudItem xs="12" Class="d-flex align-center">
                <MudText>CraftingTable: @ContextService.GetTranslation(Recipe.CraftingTable)</MudText>
                <MudText>Skill: @ContextService.GetTranslation(Recipe.Skill) @(Recipe.Skill is not null ? Recipe.SkillLevel : "")</MudText>
                <MudText>Craft Time: @Recipe.CraftMinutes minutes</MudText>
                <MudText>Labor: @Recipe.Labor</MudText>

                <MudText Typo="Typo.h6">Ingredients:</MudText>
                @foreach (var element in Recipe.Elements.Where(e => e.IsIngredient()).ToList())
                {
                    <MudText> @(element.Quantity * -1) @ContextService.GetTranslation(element.ItemOrTag)</MudText>
                }

                <MudText Typo="Typo.h6">Products:</MudText>
                @foreach (var element in Recipe.Elements.Where(e => e.IsProduct()).ToList())
                {
                    <MudText> @(element.Quantity) @ContextService.GetTranslation(element.ItemOrTag)</MudText>
                }
            </MudItem>
        </MudGrid>
    </MudContainer>
</MudDialogContent>

@code {
    [CascadingParameter] MudDialogInstance MudDialog { get; set; } = default!;

    [Parameter]
    public Recipe Recipe { get; set; }

    private void Ok()
    {
        MudDialog.Cancel();
    }
}
