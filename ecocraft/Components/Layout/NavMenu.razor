@implements IDisposable
@using ecocraft.Services
@inject ContextService ContextService

<MudNavMenu>
    <MudNavLink Href="" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Balance">Price Calculator</MudNavLink>
    <MudNavLink Href="graph-view" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.GraphicEq">Graph View</MudNavLink>
    @if (ContextService.CurrentUserServer?.IsAdmin ?? false)
    {
        <MudNavLink Href="server-management" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.AdminPanelSettings">Server Management</MudNavLink>
    }
    @if (ContextService.CurrentUser?.SuperAdmin ?? false)
    {
        <MudNavLink Href="super-admin" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Superscript">Super Admin</MudNavLink>
    }
</MudNavMenu>

@code {
    protected override void OnInitialized()
    {
        ContextService.OnContextChanged += StateHasChanged;
    }

    public void Dispose()
    {
        ContextService.OnContextChanged -= StateHasChanged;
    }
}
